<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Регистрация на кодирование</title>
  <style>
    :root{ --bg:#000; --fg:#fff; --muted:rgba(255,255,255,0.12); }
    html,body{height:100%;}
    body{
      margin:0;background:var(--bg);color:var(--fg);font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;display:flex;align-items:center;justify-content:center;
    }
    .container{width:100%;max-width:820px;padding:28px;box-sizing:border-box}
    .card{background:transparent;border-radius:12px;padding:20px;border:1px solid rgba(255,255,255,0.06)}

    h1{margin:0 0 18px 0;font-size:22px;text-align:left}
    form{background:#000;padding:18px;border:1px solid var(--fg);border-radius:10px}
    .row{display:flex;gap:12px}
    .col{flex:1}
    label{display:block;font-size:13px;margin-bottom:6px;color:var(--fg);opacity:0.95}
    input[type=text], input[type=date], input[type=tel], select, textarea{
      width:100%;background:#000;border:1px solid var(--fg);color:var(--fg);padding:10px 12px;border-radius:8px;box-sizing:border-box;font-size:14px
    }
    .field{margin-bottom:14px}
    .checkbox-row{display:flex;align-items:center;gap:10px;margin-bottom:16px}
    .checkbox-row input{width:18px;height:18px}
    button{
      background:transparent;border:1px solid var(--fg);color:var(--fg);padding:10px 16px;border-radius:8px;font-weight:600;cursor:pointer
    }
    button:active{transform:translateY(1px)}

    /* Console */
    .stage{position:relative;margin-top:20px;height:420px;border-radius:10px;overflow:hidden;border:1px solid rgba(255,255,255,0.06)}
    .console{
      background:#000; height:100%; padding:18px; box-sizing:border-box; font-family:monospace; font-size:13px; color:var(--fg); line-height:1.45; white-space:pre-wrap; overflow:auto;
      box-shadow: inset 0 0 40px rgba(255,255,255,0.02);
      display:flex;flex-direction:column;justify-content:flex-start;
    }
    .console .line{opacity:0;transform:translateY(6px);animation:lineIn 300ms forwards}
    @keyframes lineIn{to{opacity:1;transform:none}}

    .overlay-message{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none;opacity:0;transition:opacity 800ms ease}
    .overlay-message.show{opacity:1;pointer-events:auto}
    .final-card{background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid var(--fg);padding:24px;border-radius:8px;text-align:center}
    .final-card h2{margin:0 0 8px 0;font-size:20px}
    .final-card p{margin:0;font-size:16px}

    /* fade out console */
    .console.fade-out{transition:opacity 900ms ease;opacity:0}

    /* responsive */
    @media (max-width:560px){.row{flex-direction:column}}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>Регистрация на кодирование</h1>
      <form id="regForm">
        <div class="field">
          <label for="fullname">ФИО</label>
          <input id="fullname" name="fullname" type="text" placeholder="Иванов Иван Иванович" required />
        </div>
        <div class="row">
          <div class="col field">
            <label for="dob">Дата рождения</label>
            <input id="dob" name="dob" type="date" required />
          </div>
          <div class="col field">
            <label for="zodiac">Знак зодиака</label>
            <input id="zodiac" name="zodiac" type="text" placeholder="Овен, Телец..." required />
          </div>
        </div>
        <div class="field">
          <label for="address">Адрес проживания</label>
          <input id="address" name="address" type="text" placeholder="Улица, дом, квартира" required />
        </div>
        <div class="row">
          <div class="col field">
            <label for="country">В какой стране проживаете</label>
            <input id="country" name="country" type="text" placeholder="Россия" required />
          </div>
          <div class="col field">
            <label for="phone">Номер телефона</label>
            <input id="phone" name="phone" type="tel" placeholder="+7 (900) 000-00-00" required />
          </div>
        </div>

        <div class="checkbox-row">
          <input id="agree" type="checkbox" required />
          <label for="agree">Согласие с политикой и использованием данных</label>
        </div>

        <div style="display:flex;gap:10px;align-items:center">
          <button id="startBtn" type="submit">Начать кодирование</button>
        </div>
      </form>

      <div class="stage" id="stage" style="display:none;">
        <div class="console" id="console"></div>
        <div class="overlay-message" id="overlay">
          <div class="final-card" id="finalCard">
            <h2 id="finalName"></h2>
            <p>Кодирование успешно произведено!</p>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script>
    const form = document.getElementById('regForm');
    const stage = document.getElementById('stage');
    const consoleEl = document.getElementById('console');
    const overlay = document.getElementById('overlay');
    const finalName = document.getElementById('finalName');

    function randomInt(min,max){return Math.floor(Math.random()*(max-min+1))+min}
    function pad(n,len=2){return String(n).padStart(len,'0')}

    function makeFakeLine(){
      const templates = [
        'Инициализация модулей...',
        'Установка защищённого канала связи...',
        'Сверка ключей битовой подписи...',
        'Отправка пакета 0x'+Math.floor(Math.random()*1e8).toString(16),
        'Приём ответа от серверов... OK',
        'Распаковка контейнера данных...',
        'Шифрование секции пользователя...',
        'Обмен токенами с узлом-'+randomInt(1,9),
        'Запись логов в удалённый репозиторий...',
        'Верификация контрольной суммы...',
        'Синхронизация таблиц маршрутизации...',
        'Закрытие временных сессий...'    
      ];
      const t = templates[randomInt(0,templates.length-1)];
      const ts = new Date();
      const time = pad(ts.getHours())+':'+pad(ts.getMinutes())+':'+pad(ts.getSeconds());
      return `[${time}] ${t}`;
    }

    form.addEventListener('submit', (e)=>{
      e.preventDefault();
      const data = new FormData(form);
      const fullname = data.get('fullname').trim();
      if(!fullname){alert('Введите ФИО');return}
      // hide form and show console
      form.style.display='none';
      stage.style.display='block';
      consoleEl.innerHTML='';
      overlay.classList.remove('show');
      finalName.textContent = fullname;

      // simulate console for 10 seconds
      const totalMs = 10000; // 10 seconds
      const intervalMs = 220; // average moderate speed
      const steps = Math.floor(totalMs/intervalMs);
      let count = 0;

      // seed some initial boot lines
      const bootLines = [
        'Boot sequence start',
        'Loading kernel modules',
        'Mounting virtual filesystems',
        'Checking integrity of components'
      ];
      bootLines.forEach((l,i)=>{
        setTimeout(()=>appendLine(l), i*120);
      });

      const start = Date.now();
      const timer = setInterval(()=>{
        appendLine(makeFakeLine());
        count++;
        // autoscroll
        consoleEl.scrollTop = consoleEl.scrollHeight;
        if(Date.now() - start >= totalMs){
          clearInterval(timer);
          finishSequence();
        }
      }, intervalMs);
    });

    function appendLine(text){
      const div = document.createElement('div');
      div.className='line';
      div.textContent = text;
      consoleEl.appendChild(div);
      // keep a reasonable amount of lines
      while(consoleEl.children.length > 200) consoleEl.removeChild(consoleEl.firstChild);
    }

    function finishSequence(){
      // show finalization lines
      appendLine('Завершение обмена...');
      appendLine('Финальные проверки целостности...');
      appendLine('Закрытие соединений...');
      consoleEl.scrollTop = consoleEl.scrollHeight;

      // wait a short moment then fade out console and show final overlay
      setTimeout(()=>{
        consoleEl.classList.add('fade-out');
        // after fade duration, reveal final overlay
        setTimeout(()=>{
          overlay.classList.add('show');
        }, 900);
      }, 700);
    }

  </script>
</body>
</html>
